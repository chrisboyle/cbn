-is_current = current_page? project
-cache project.cache_key + (is_current ? '-c' : '') do
	%div[project]{:class => is_current ? nil : 'hentry'}
		-title = link_to_unless_current(project.title, project, :rel => 'bookmark')
		-if is_current
			%h1= title
		-else
			%h2.entry-title= title
		.meta
			.timescale #{project.start ? project.start.strftime('%B %Y') : 'unknown'} - #{project.end ? project.end.strftime('%B %Y') : 'present'} (#{project.status})
			.tags= render :partial => 'tags/tags', :object => project.tags
			.clearleft
		-if project.vcs.present?
			.vcslinks
				-if /^git:\/\/(github.com\/.*?)\.git$/.match project.vcs
					=succeed ";" do concat link_to 'github', "http://#{$1}"; end
					=succeed ";" do concat link_to 'bugs', "http://#{$1}/issues"; end
					=link_to 'changes', "http://#{$1}/commits"
				-else
					=link_to 'VCS URL', project.vcs
		.entry-content= render :partial => 'common/body', :format => 'html', :object => (is_current || project.summary.blank?) ? project.body : project.summary
